(this.webpackJsonpsrc=this.webpackJsonpsrc||[]).push([[0],{137:function(e,t){},140:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(62),r=n.n(s),i=(n(76),n(24)),l=n(14),c=n(17),u=n.n(c),d=n(63),m=n.n(d),g=(n(77),n(1)),p=n(2),h=n(5),v=n(3),f=n(4),b=n(12),S=n.n(b),y=(n(28),function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(l.a,{render:function(t){var n=t.history;return o.a.createElement("button",{className:"button",style:I,onClick:function(){var t=Math.floor(9e3*Math.random(),1e4);e.setState({pin:t});var a={pin:t};S.a.post("http://172.31.8.152:8080/dbController/createRoom",a),localStorage.clear();n.push({pathname:"/room",data:t})}},o.a.createElement("span",null,"Create Room"))}}))}}]),t}(a.Component)),I={display:"inline-block",borderColor:"#555",paadding:"7px 20px",cursor:"pointer"},E=y,j=function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(O,null))}}]),t}(a.Component),O=function(){return o.a.createElement(l.a,{render:function(e){var t=e.history;return o.a.createElement("button",{type:"button",className:"button",style:N,onClick:function(){t.push("/JoinPage")}},o.a.createElement("span",null,"Join Room"))}})},N={display:"inline-block",borderColor:"#555",paadding:"7px 20px",cursor:"pointer",top:"10px"},q=j,C=n(10),V=(n(30),function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.song,t=e.videoId,n=e.title,a=(e.description,e.thumbnail);return o.a.createElement("div",{className:"box-container"},o.a.createElement("div",{className:"thumbnail-container"},o.a.createElement("img",{className:"thumbnail",src:a,alt:n})),o.a.createElement("div",{className:"title-container"},o.a.createElement("p",{className:"title-info"},n),o.a.createElement("p",null,o.a.createElement("button",{onClick:this.props.deleteSong.bind(this,t),className:"removeButton"},"X"))))}}]),t}(a.Component)),k=function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return this.props.songs.map((function(t){return o.a.createElement(V,{key:t.videoId,song:t,deleteSong:e.props.deleteSong})}))}}]),t}(a.Component),x=null,w=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={searchQuery:""},n.handleChange=function(e){n.setState({searchQuery:e.target.value})},n.handleSubmit=function(e){var t={value:n.state.searchQuery};S.a.post("http://172.31.8.152:8080/searchController/search",t).then((function(e){n.info=e.data,n.props.addRequests(e.data),n.setState({searchQuery:""})})).catch((function(e){console.error("SearchBar.js: quiery didnt work")})),console.log(x),S.a.post("http://172.31.8.152:8080/searchController/searchinfo","E2y2ey2oPAk").then((function(e){})).catch((function(e){console.error("SearchBar.js: info query didnt work")})),e.preventDefault()},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit,style:{display:"flex"}},o.a.createElement("input",{type:"text",name:"textBox",style:{flex:"10",padding:"8px"},placeholder:"Enter Song Request",value:this.state.searchQuery,onChange:this.handleChange}),o.a.createElement("input",{type:"submit",name:"title",placeholder:"Search",value:"Search",style:L})))}}]),t}(a.Component),L={display:"inline-block",borderColor:"#555",background:"#555",color:"#fff",paadding:"7px 20px",cursor:"pointer",width:"10%"},R=w,P=n(66),B=n(26),J=n.n(B),Q=function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.song,t=e.title,n=(e.description,e.thumbnail);return o.a.createElement("div",{className:"box-container"},o.a.createElement("div",{className:"thumbnail-container"},o.a.createElement("img",{className:"thumbnail",src:n,alt:t})),o.a.createElement("div",{className:"title-container"},o.a.createElement("p",{className:"title-info"},t),o.a.createElement("p",null,o.a.createElement("button",{onClick:this.props.addSong.bind(this,this.props.song),className:"addButton"},"+"))))}}]),t}(a.Component),A=function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return this.props.requests.map((function(t){return o.a.createElement(Q,{key:t.videoId,song:t,addSong:e.props.addSong})}))}}]),t}(a.Component),M=(n(20),n(69)),W=n.n(M),D=(n(140),null),T=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(h.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={songs:[],pin:"",requests:[],flag:!0},n.handleClose=function(e){parseInt(n.state.pin,10);var t={pin:n.state.pin};D.emit("delete-room",t),D.emit("leave-room",t)},n.addRequests=function(e){console.log("SearchPage.js: adding new songs",e),n.setState({requests:[]}),e.map((function(e){return n.setState({requests:[].concat(Object(C.a)(n.state.requests),[{videoId:e.id.videoId,title:e.snippet.title,description:e.snippet.description,thumbnail:e.snippet.thumbnails.default.url}])})}))},n.addSong=function(e){var t=!1;if(n.state.songs.map((function(n){n.videoId===e.videoId&&(t=!0)})),t)alert("That song is already in the queue!");else{console.log(e);var a={videoId:e.videoId,title:e.title,description:e.description,thumbnail:e.thumbnail};console.log("SearchPage.js: emmitting to server"),D.emit("add-song-up",{song:a,pin:n.state.pin}),n.setState({requests:Object(C.a)(n.state.requests.filter((function(t){return t.videoId!==e.videoId})))})}},n.deleteSong=function(e){D.emit("remove-song-up",{videoId:e,pin:n.state.pin}),n.setState({songs:Object(C.a)(n.state.songs.filter((function(t){return t.videoId!==e})))}),localStorage.setItem("songsInLocalStorage",JSON.stringify(n.state.songs))},n.updateQueue=function(e){D.emit("update-queue-up",{videoId:e,pin:n.state.pin}),n.setState({songs:Object(C.a)(n.state.songs.filter((function(t){return t.videoId!==e})))}),localStorage.setItem("songsInLocalStorage",JSON.stringify(n.state.songs))},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;D=J()("http://172.31.8.152:8080/communication"),window.addEventListener("beforeunload",this.handleClose);var t=this.props.history.location.data,n=[];console.log("pin from history",t),console.log("pin in local",localStorage.getItem("pinInLocalStorage"));var a=!1;void 0==localStorage.getItem("pinInLocalStorage")?(console.log("pin set to history"),t=this.props.history.location.data):void 0==t?(console.log("pin undefined and set to local value"),t=localStorage.getItem("pinInLocalStorage"),a=!1):(a=!0,console.log("local not null and pin not undefined so set to pin")),null==JSON.parse(localStorage.getItem("songsInLocalStorage"))||a?(console.log("songs set to nothing"),localStorage.removeItem("songsInLocalStorage"),n=[]):(console.log("songs set to local"),n=JSON.parse(localStorage.getItem("songsInLocalStorage"))),D.emit("host-join-up",{pin:t}),this.setState({pin:t,songs:n,currentVid:""});var o={pin:parseInt(t,10)};S.a.post("http://172.31.8.152:8080/dbController/createRoom",o),localStorage.setItem("pinInLocalStorage",t),D.on("user-join-down",(function(e){})),D.on("add-song-down",(function(t){var n=e.state.playerObject;e.setState({songs:[].concat(Object(C.a)(e.state.songs),[t.song])}),e.state.flag&&(e.setState({currentVid:e.state.songs[0].title}),localStorage.setItem("currentVid",e.state.songs[0].title),localStorage.setItem("currentVidId",e.state.songs[0].videoId),n.cueVideoById(e.state.songs[0].videoId),e.updateQueue(e.state.songs[0].videoId),n.playVideo(),e.setState({flag:!1})),localStorage.setItem("songsInLocalStorage",JSON.stringify(e.state.songs))})),D.on("user-request-queue-down",(function(e){console.log("user-request-queue-down"),console.log(e.pin),D.emit("host-response-queue-up",{songs:JSON.parse(localStorage.getItem("songsInLocalStorage")),pin:localStorage.getItem("pinInLocalStorage"),currentSong:localStorage.getItem("currentVid")})}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("onbeforeunload",this.handleClose),console.log("PIN in room: "+this.state.pin);var e={data:{pin:parseInt(this.state.pin)}};S.a.delete("http://172.31.8.152:8080/dbController/deleteRoom",e).then((function(e){console.log(e.statusCode)}));var t={pin:this.state.pin};D.emit("leave-room",t)}},{key:"_onReady",value:function(e){console.log("onReady");var t=e.target;if(t.playVideo(),this.state.playerObject=t,null!=localStorage.getItem("currentVidId")){this.state.flag=!1;var n=localStorage.getItem("currentVidId"),a=localStorage.getItem("currentVid");this.setState({currentVid:a}),t.cueVideoById(n),t.playVideo()}else console.log("no id in ls")}},{key:"setCurrentlyPlayingToEmptyString",value:function(){D.emit("no-current-song",{pin:this.state.pin}),this.setState({currentVid:""}),localStorage.setItem("currentVid",""),localStorage.setItem("currentVidId","")}},{key:"onEnd",value:function(e){console.log("onend");var t=e.target;this.state.songs.length?(this.setState({currentVid:this.state.songs[0].title}),localStorage.setItem("currentVid",this.state.songs[0].title),localStorage.setItem("currentVidId",this.state.songs[0].videoId),t.cueVideoById(this.state.songs[0].videoId),this.updateQueue(this.state.songs[0].videoId),t.playVideo()):(this.setCurrentlyPlayingToEmptyString(),this.setState({flag:!0}))}},{key:"onError",value:function(e){this.state.flag=!0,console.log("onError");var t=e.target;if(console.log(localStorage.getItem("currentVidId")),null!==localStorage.getItem("currentVidId")&&""!==localStorage.getItem("currentVidId")){this.state.flag=!1;var n=localStorage.getItem("currentVidId"),a=localStorage.getItem("currentVid");this.setState({currentVid:a}),t.cueVideoById(n),t.playVideo()}else console.log("Error hit and no videoID from previous session, load default video"),this.state.flag=!0,t.cueVideoById("AjWfY7SnMBI"),t.playVideo();t.playVideo()}},{key:"render",value:function(){return o.a.createElement("div",{className:"main-container"},o.a.createElement("header",{className:"header"},o.a.createElement("h1",null,"Room #",this.state.pin," Currently Playing: ",this.state.currentVid)),o.a.createElement("div",{className:"searchBar-container"},o.a.createElement(R,{addRequests:this.addRequests})),o.a.createElement("div",{className:"song-container"},o.a.createElement("p",{className:"songPrompt"},"Search Results"),o.a.createElement("div",{className:"song-bounding"},o.a.createElement(A,{requests:this.state.requests,addSong:this.addSong}))),o.a.createElement("div",{className:"queue-container"},o.a.createElement("p",{className:"queuePrompt"},"Current Queue"),o.a.createElement("div",{className:"queue-bounding"},o.a.createElement(k,{songs:this.state.songs,deleteSong:this.deleteSong}))),o.a.createElement("div",{className:"video-container"},o.a.createElement(P.a,{className:"player",videoId:"AjWfY7SnMBI",opts:{playerVars:{autoplay:1,rel:0}},onReady:this._onReady.bind(this),onEnd:this.onEnd.bind(this),onError:this.onError.bind(this)})),o.a.createElement("div",{className:"logo-container"},o.a.createElement("img",{src:W.a,className:"logo-shape"})))}}]),t}(a.Component),_=n(38),Y=n.n(_),F=n(70),G=n(25),U=(n(142),{particles:{number:{value:150,density:{enable:!0,value_area:800}}}}),X=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(h.a)(this,Object(v.a)(t).call(this))).routeChange=function(){var t=Object(F.a)(Y.a.mark((function t(n){var a,o,s;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a={params:{pin:e.state.pin}},t.next=4,S.a.get("http://172.31.8.152:8080/dbController/doesRoomExist",a);case 4:o=t.sent,s=o.data.exists,console.log(s),!0===s?(console.log("If hit"),"/searchPage",e.props.history.push({pathname:"/searchPage",data:e.state.pin})):(console.log("Else hit"),alert("This room does not exist"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState({pin:t.target.value})},e.handleSubmit=function(t){e.props.history.push({pathname:"/searchPage",data:e.state.pin})},e.state={pin:""},e.routeChange=e.routeChange.bind(Object(G.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"component-container"},o.a.createElement(u.a,{className:"particles",params:U}),o.a.createElement("header",{className:"component-header"},o.a.createElement("form",{className:"text-container",onSubmit:this.routeChange},o.a.createElement("h1",null,"Enter a Room Number:"),o.a.createElement("input",{className:"inputBox",type:"text",name:"textBox",style:{padding:"5px"},placeholder:"####",value:this.state.pin,onChange:this.handleChange}),o.a.createElement("div",{class:"divider"}),o.a.createElement("input",{className:"button",type:"submit",name:"title",value:"Join!",placeholder:"Search"}))))}}]),t}(a.Component),$=function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.song,t=e.title,n=(e.description,e.thumbnail);return o.a.createElement("div",{className:"box-container"},o.a.createElement("div",{className:"thumbnail-container"},o.a.createElement("img",{className:"thumbnail",src:n,alt:t})),o.a.createElement("div",{className:"title-container"},o.a.createElement("p",{className:"title-info"},t)))}}]),t}(a.Component),z=function(e){function t(){return Object(g.a)(this,t),Object(h.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return this.props.songs.map((function(t){return o.a.createElement($,{key:t.videoId,song:t,addSong:e.props.addSong})}))}}]),t}(a.Component),H=(n(143),null),K={particles:{number:{value:150,density:{enable:!0,value_area:800}}}},Z=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(h.a)(this,Object(v.a)(t).call(this))).fetchSongs=function(){console.log("emmitting request for songs"),console.log(localStorage.getItem("pinInLocalStorage")),H.emit("user-request-queue-up",{pin:localStorage.getItem("pinInLocalStorage")}),H.on("host-response-queue-down",(function(t){console.log("song info received"),t.songs?(e.setState({songs:t.songs}),e.setState({currentVid:t.currentSong}),localStorage.setItem("songsInLocalStorage",JSON.stringify(t.songs))):e.setState({currentVid:""})}))},e.addRequests=function(t){console.log("SearchPage.js: adding new songs",t),e.setState({requests:[]}),t.map((function(t){return e.setState({requests:[].concat(Object(C.a)(e.state.requests),[{videoId:t.id.videoId,title:t.snippet.title,description:t.snippet.description,thumbnail:t.snippet.thumbnails.default.url}])})}))},e.addSong=function(t){var n=!1;if(e.state.songs.map((function(e){e.videoId===t.videoId&&(n=!0)})),n)alert("That song is already in the queue!");else{console.log(t);var a={videoId:t.videoId,title:t.title,description:t.description,thumbnail:t.thumbnail};console.log("SearchPage.js: emmitting to server"),H.emit("add-song-up",{song:a,pin:e.state.pin}),e.setState({requests:Object(C.a)(e.state.requests.filter((function(e){return e.videoId!==t.videoId})))})}},e.deleteSong=function(t){e.setState({songs:Object(C.a)(e.state.songs.filter((function(e){return e.videoId!==t})))})},e.state={songs:[],requests:[]},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;H=J()("http://172.31.8.152:8080/communication");var t=this.props.history.location.data;void 0===localStorage.getItem("pinInLocalStorage")?(console.log("pin set to history"),t=this.props.history.location.data):void 0===t?(console.log("pin undefined and set to local value"),t=localStorage.getItem("pinInLocalStorage")):(!0,console.log("local not null and pin not undefined so set to pin")),this.setState({pin:t,songs:[],requests:[],currentVid:""}),localStorage.setItem("pinInLocalStorage",t),console.log("pin in local storage",localStorage.getItem("pinInLocalStorage")),H.emit("user-join-up",{pin:t}),H.on("user-join-down",(function(e){})),H.on("add-song-down",(function(t){e.setState({songs:[].concat(Object(C.a)(e.state.songs),[t.song])}),console.log(e.state.songs),console.log("Song state: "+JSON.stringify(e.state.songs))})),H.on("remove-song-down",(function(t){console.log("request made from user at pin",t.pin),console.log("local pin",e.state.pin),e.setState({songs:Object(C.a)(e.state.songs.filter((function(e){return e.videoId!==t.videoId})))}),localStorage.setItem("songsInLocalStorage",JSON.stringify(e.state.songs))})),H.on("update-queue-down",(function(t){console.log("update-queue-down hit"),e.setState({currentVid:e.state.songs[0].title}),e.setState({songs:Object(C.a)(e.state.songs.filter((function(e){return e.videoId!==t.videoId})))}),localStorage.setItem("songsInLocalStorage",JSON.stringify(e.state.songs))})),H.on("no-current-song-down",(function(t){console.log("no-current-song-down hit"),e.setState({currentVid:""}),localStorage.setItem("currentVid","")})),console.log(this.state),this.fetchSongs()}},{key:"handleGo",value:function(e){H.emit("test",{pin:this.state.pin})}},{key:"render",value:function(){return o.a.createElement("div",{className:"main-container"},o.a.createElement(u.a,{className:"particles",params:K}),o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"room-info"},"Room#: ",this.state.pin," ",o.a.createElement("br",null)," Currently Playing: ",this.state.currentVid)),o.a.createElement("div",{className:"searchBar-container"},o.a.createElement(R,{addRequests:this.addRequests})),o.a.createElement("div",{className:"queue-container2"},o.a.createElement("div",{className:"queue-prompt"},"Current Queue"),o.a.createElement("div",{className:"queue-bounding"},o.a.createElement(z,{songs:this.state.songs}))),o.a.createElement("div",{className:"song-container2"},o.a.createElement("div",{className:"song-prompt"},"Search Results"),o.a.createElement("div",{className:"song-bounding"},o.a.createElement(A,{requests:this.state.requests,addSong:this.addSong}))),o.a.createElement("div",null))}}]),t}(a.Component),ee={particles:{number:{value:150,density:{enable:!0,value_area:800}}}};var te=function(){return o.a.createElement(i.a,null,o.a.createElement("div",null,o.a.createElement(l.a,{exact:!0,path:"/",render:function(e){return o.a.createElement("div",{className:"App"},o.a.createElement(u.a,{className:"particles",params:ee}),o.a.createElement("header",{className:"App-header"},o.a.createElement("div",{className:"text"},o.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"}),o.a.createElement("p",null,"Welcome to OxCord, the world's first Video Player Sharer!"),o.a.createElement("h1",null,"Join the Party!"),o.a.createElement(E,null),o.a.createElement(q,null))))}}),o.a.createElement(l.a,{path:"/room",component:T}),o.a.createElement(l.a,{path:"/joinPage",component:X}),o.a.createElement(l.a,{path:"/searchPage",component:Z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},28:function(e,t,n){},30:function(e,t,n){},63:function(e,t,n){e.exports=n.p+"static/media/OxCordLogoFinal.7b790bb6.png"},69:function(e,t,n){e.exports=n.p+"static/media/oxImage.4800ea1d.jpg"},71:function(e,t,n){e.exports=n(144)},76:function(e,t,n){},77:function(e,t,n){}},[[71,1,2]]]);
//# sourceMappingURL=main.f244ef6a.chunk.js.map